<!doctype html>
<html>
	<head>
		<title>JS1k, 1k demo submission asafh</title>
		<meta charset="utf-8" />
	</head>
	<body>
		<canvas id="c"></canvas>
		<script>
			var b = document.body;
			var c = document.getElementsByTagName('canvas')[0];
			var a = c.getContext('2d');
			document.body.clientWidth; // fix bug in webkit: http://qfox.nl/weblog/218
		</script>
		<script>
// start of submission //

a.translate(D=c.height=c.width=720, 0); //D is the dimension (square), set canvas size to it, translate
T=10, //Character Size
L=D/T, //# of Characters in a dimension
M = [], //Current state
Z=[-1,0,1]; //Immediate steps permutations 

a.scale(-1, 1);
a.shadowBlur = 2;

for(i=0;i<L*L;M[i]=0, ++i); //initialize everything to dead
function A(r) { //Set current column and row r to alive
	M[r*L+C]=1;
	return A;
}
//Setting up a "Gosper glider gun"
A(5,C=1)(6) //Current column = 1
 (5,C=2)(6) //Notice how we set/increment between chained calls to A by adding an ignored parameter
 (5,C=11)(6)(7)
 (4,C++)(8)
 (3,C++)(9)
 (3,C++)(9)
 (6,C++)
 (4,C++)(8)
 (5,C++)(6)(7)
 (6,C++)
 (3,C=21)(4)(5)
 (3,C++)(4)(5)
 (2,C++)(6)
 (1,C=25)(2)(6)(7)
 (4,C=35)(5)
 (4,C++)(5);

setInterval(function() {
	//Clear canvas
	a.fillStyle = a.shadowColor = '#000';
    a.fillRect(0, 0, D, D);
    a.fillStyle = a.shadowColor = '#0F0'; //Green
    
	M = M.map(function(v,i) { //Map state into new state while drawing current one
        if(v) a.fillText(String.fromCharCode(12448 + Math.random() * 96), i%L*T, T*(i-i%L)/L); //i%L is the column,(i-i%L)/L is the row. Draw Random matrix character at c*T,r*T
		
		//sums the number of living cells that are neighbouring this cell including itself
		s=0;
		Z.map(function(p) {
			Z.map(function(q) {
				x=i%L+p;
				s+=(x>=0 && x<L && M[i+q*L+p])||0 //1 iff the cell at i with the steps r in rows and c in columns exist and is alive, 0 otherwise
			})
		}); //'Map' is shorter than 'forEach'
		
		return (s==3?1:v&&s==4)?1:0 // equals to (v?s==3||s==4:s==3)?1:0; which means if I'm alive I'll stay alive if the sum of my vicinity is 3/4 (me+2/3 neighbours)
			//or if I'm dead then exactly 3 neighbours.
	});
},33);
// end of submission //
		</script>
	</body>
</html>
